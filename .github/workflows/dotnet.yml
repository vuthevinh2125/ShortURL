name: .NET CI - TinyUrlWebApp Build & Test

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

env:
  # Giá»¯ tÃªn file Solution Ä‘Ã£ xÃ¡c nháº­n
  SOLUTION_FILE: TinyUrlWebApp.slnx 
  DOTNET_VERSION: '8.0.x' 

jobs:
  build-and-test:
    runs-on: windows-latest 

    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Setup .NET SDK
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: ${{ env.DOTNET_VERSION }}

    - name: Restore dependencies
      # Váº«n cháº¡y Restore Ä‘áº§u tiÃªn
      run: dotnet restore ${{ env.SOLUTION_FILE }}

    # ğŸ”¥ ÄÃƒ Bá» BÆ¯á»šC BUILD RIÃŠNG BIá»†T (VÃ¬ nÃ³ gÃ¢y lá»—i CS0246)
    # ChÃºng ta sáº½ Ä‘á»ƒ cho lá»‡nh dotnet test tá»± Ä‘á»™ng build
    
    - name: Build and Run Unit Tests
      # Thay tháº¿ bÆ°á»›c Build vÃ  Test báº±ng lá»‡nh dotnet test duy nháº¥t.
      # Lá»‡nh nÃ y sáº½ tá»± Ä‘á»™ng build dá»± Ã¡n trÆ°á»›c khi cháº¡y test, vÃ  thÆ°á»ng xá»­ lÃ½ lá»—i CS0246 tá»‘t hÆ¡n.
      run: dotnet test ${{ env.SOLUTION_FILE }} --configuration Release --verbosity normal
